# ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–æ –≤ v2.3.0

–í—Å–µ –Ω–∞—Ö–æ–¥–∫–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã! –ù–∏–∂–µ ‚Äî —Å–ø–∏—Å–æ–∫ —á—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ.

---

## ‚úÖ –ö—Ä–∏—Ç–∏—á–Ω—ã–µ (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ)

### 1. ‚úÖ pre-commit —Ç–µ—Ä—è–µ—Ç —Ñ–∞–∫—Ç –Ω–∞–ª–∏—á–∏—è –¥–æ–∫–∏ –ø—Ä–∏ >10 –∫–æ–¥-—Ñ–∞–π–ª–∞—Ö
**–§–∞–π–ª—ã:** `githooks/pre-commit` L83-95, `.githooks/pre-commit` L83-95
**–†–µ—à–µ–Ω–∏–µ:** –£–±—Ä–∞–Ω `break`, —Ç–µ–ø–µ—Ä—å —Ü–∏–∫–ª –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç—Å—è –¥–∞–∂–µ –ø–æ—Å–ª–µ 10 —Ñ–∞–π–ª–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–∞ `changed_docs`.

### 2. ‚úÖ –ê–≤—Ç–æ-managed —Ö—É–∫–∏ –∑–∞—Ç–∏—Ä–∞—é—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
**–§–∞–π–ª—ã:** `install.sh` setup_hooks L181-230, uninstall L686-707
**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ö—É–∫–æ–≤ –≤ `.githooks/` –∏ `.git/hooks/` –ø–µ—Ä–µ–¥ —Ä–µ–∂–∏–º–æ–º `auto`
- –ü—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ —Ö—É–∫–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ `integrate`
- –î–æ–±–∞–≤–ª–µ–Ω –º–∞—Ä–∫–µ—Ä-—Ñ–∞–π–ª `.ai-docs-system-managed` –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è
- –°–æ–∑–¥–∞—ë—Ç—Å—è –±—ç–∫–∞–ø —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ —Ö—É–∫–∞ –µ—Å–ª–∏ –æ–Ω –Ω–µ –Ω–∞—à
- `uninstall` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –º–∞—Ä–∫–µ—Ä –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ —É–¥–∞–ª–µ–Ω–∏—è

### 3. ‚úÖ –ü–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–∞ owner –Ω–µ–±–µ–∑–æ–ø–∞—Å–Ω–∞ (sed injection)
**–§–∞–π–ª—ã:** `install.sh` L807, L840; `install.ps1` L204, L229
**–†–µ—à–µ–Ω–∏–µ:**
- **Bash:** –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `escape_sed_replacement()` –¥–ª—è —ç–∫—Ä–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è `\`, `&`, `/`
- **PowerShell:** –ó–∞–º–µ–Ω—ë–Ω `-replace` (regex) –Ω–∞ `.Replace()` (literal string)

---

## ‚úÖ –°—Ä–µ–¥–Ω–∏–π —Ä–∏—Å–∫ / –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å (–≤—ã–ø–æ–ª–Ω–µ–Ω–æ)

### 4. ‚úÖ PENDING_UPDATES_WRITE=shared|both –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
**–§–∞–π–ª—ã:** `githooks/pre-commit` L213-256, `.githooks/pre-commit`
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ä–µ–∞–ª—å–Ω–∞—è –∑–∞–ø–∏—Å—å –≤ shared –æ—á–µ—Ä–µ–¥—å –ø—Ä–∏ `shared|both`, —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞–±—Å–æ–ª—é—Ç–Ω—ã—Ö –ø—É—Ç–µ–π –∏ `.queue0` fallback.

### 5. ‚úÖ audit –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç –∞–±—Å–æ–ª—é—Ç–Ω—ã–µ –ø—É—Ç–∏ –æ—á–µ—Ä–µ–¥–µ–π
**–§–∞–π–ª—ã:** `install.sh` L446-522
**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ `[[ "$pending_local" == /* ]]` –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∞–±—Å–æ–ª—é—Ç–Ω–æ–≥–æ –ø—É—Ç–∏, –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ –¥–ª—è `pending_shared`.

### 6. ‚úÖ audit –ø–ª–æ—Ö–æ prune-–∏—Ç nested ignore-dirs
**–§–∞–π–ª—ã:** `install.sh` L548-555
**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω—ë–Ω `-path $target/$idir` –Ω–∞ `-name $idir` –¥–ª—è –º–∞—Ç—á–∏–Ω–≥–∞ –Ω–∞ –ª—é–±–æ–º —É—Ä–æ–≤–Ω–µ –≤–ª–æ–∂–µ–Ω–Ω–æ—Å—Ç–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `apps/*/node_modules`).

### 7. ‚úÖ PS –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç HOOKS_MODE
**–§–∞–π–ª—ã:** `install.ps1` L148-284, L413
**–†–µ—à–µ–Ω–∏–µ:** –ü–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `Setup-Hooks` –∏–∑ bash —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π `auto/managed/integrate/off` —Ä–µ–∂–∏–º–æ–≤, –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ö—É–∫–æ–≤ –∏ –º–∞—Ä–∫–µ—Ä–æ–º.

### 8. ‚úÖ PS –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø—É—Å—Ç—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è
**–§–∞–π–ª—ã:** `install.ps1` L27-40
**–†–µ—à–µ–Ω–∏–µ:** –ò–∑–º–µ–Ω–µ–Ω–∞ —Ä–µ–≥—É–ª—è—Ä–∫–∞ –≤ `Get-ConfigValue` —Å `(.+)` –Ω–∞ `(.*)` –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–æ–∫ (`KEY=`).

### 9. ‚úÖ PS –Ω–µ –¥–µ–ª–∞–µ—Ç merge –∫–æ–Ω—Ñ–∏–≥–∞ –ø—Ä–∏ update
**–§–∞–π–ª—ã:** `install.ps1` L265-391, L487-489
**–†–µ—à–µ–Ω–∏–µ:** –ü–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `Merge-Config` –∏–∑ bash —Å –∫–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω—ã–º –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤—ã—Ö –∫–ª—é—á–µ–π –ø–µ—Ä–µ–¥ "–ü—Ä–∏–º–µ—Ä—ã –∫–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏–∏" –∏ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–æ–π `RULES_ENABLED`.

---

## üì¶ –ò–∑–º–µ–Ω—ë–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### –ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
1. `githooks/pre-commit` ‚Äî —É–±—Ä–∞–Ω break, –¥–æ–±–∞–≤–ª–µ–Ω–∞ shared –∑–∞–ø–∏—Å—å
2. `.githooks/pre-commit` ‚Äî —Ç–æ –∂–µ —Å–∞–º–æ–µ
3. `install.sh` ‚Äî escape_sed_replacement, setup_hooks —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π, uninstall —Å –º–∞—Ä–∫–µ—Ä–æ–º, audit —Å –∞–±—Å–æ–ª—é—Ç–Ω—ã–º–∏ –ø—É—Ç—è–º–∏, prune –ø–æ name
4. `install.ps1` ‚Äî .Replace() –¥–ª—è owner, Setup-Hooks, Get-ConfigValue (.+‚Üí.*), Merge-Config

### –í–µ—Ä—Å–∏–∏ –æ–±–Ω–æ–≤–ª–µ–Ω—ã:
- `install.sh` ‚Üí `2.3.0`
- `install.ps1` ‚Üí `2.3.0`
- `.ai-docs-system/update.sh` ‚Üí `2.3.0`

---

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

–í—Å–µ –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –∏ —Å—Ä–µ–¥–Ω–∏–µ –±–∞–≥–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã:
- ‚úÖ 3 –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö (–ø–æ—Ç–µ—Ä—è –¥–∞–Ω–Ω—ã—Ö, security)
- ‚úÖ 6 —Å—Ä–µ–¥–Ω–∏—Ö (–Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å, –∫—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å)

–ù–∏–∑–∫–æ–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–µ –∑–∞–¥–∞—á–∏ (echo‚Üíprintf, –ø—Ä–æ–±–µ–ª—ã –≤ CSV, supply-chain, –ø—Ä–æ–≤–µ—Ä–∫–∞ git) –æ—Å—Ç–∞—é—Ç—Å—è –≤ –±—ç–∫–ª–æ–≥–µ –¥–ª—è v2.4+.
